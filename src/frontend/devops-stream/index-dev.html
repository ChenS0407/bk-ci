<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" href="/static/images/favicon.ico" type="image/x-icon" />
        <link rel="shortcut icon" href="/static/images/favicon.ico" type="image/x-icon" />
        <link href="https://radosgw.open.woa.com/bkicon-default-9/stream-0.0.6/fonts/style.css" rel="stylesheet">
        <meta charset="utf-8">
        <title> 蓝盾 | Stream </title>
    </head>
    <body>
        <div id="app"></div>
        <script>
            var SITE_URL = ''
            var STATIC_URL = '/'
            var REMOTE_STATIC_URL = ''
            var LOGIN_SERVICE_URL = 'https://passport.woa.com/modules/passport/signin.ashx'
            var PROXY_URL_PREFIX = 'dev.devnet.devops.woa.com'
            var X_DEVOPS_PROJECT_ID = 'X-DEVOPS-PROJECT-ID'
            var ROUTER_TAG = 'ROUTER_TAG'
        </script>
        <script>
            function getLoginUrl (domain = LOGIN_SERVICE_URL) {
                const cUrl = location.href
                const loginUrl = new URL(domain)
                const url = new URL('http://login.o.woa.com/call_back_oa/')
                url.searchParams.append('bk_appid', 1)
                url.searchParams.append('bk_login', 1)
                url.searchParams.append('c_url', cUrl)
                
                loginUrl.searchParams.append('title', 'bklogin')
                loginUrl.searchParams.append('appkey', '909a565c052c4379b90d3d82152d2da1')
                loginUrl.searchParams.append('url', url)
                
                return loginUrl.href
            }

            // function asyncGet (url, method = 'GET', pid = '') {
            //     return new Promise(function (resolve, reject) {
            //         var xhr = new XMLHttpRequest()
            //         xhr.onreadystatechange = function () {
            //             if (this.readyState == 4 && this.status == 200) {
            //                 var res = JSON.parse(xhr.responseText)
            //                 resolve(res && res.data ? res.data : res )
            //             }  else if (this.status == 401) {
            //                 window.location.href = window.getLoginUrl()
            //             } else if (this.readyState == 4 && this.status > 400) {
            //                 reject({
            //                     status: this.status,
            //                     message: this.status === 503 ? '服务维护中，请稍候...' : '服务器内部异常'
            //                 })
            //             }
            //         }
                    
            //         xhr.withCredentials = true
            //         xhr.open(method, url)
            //         xhr.setRequestHeader(X_DEVOPS_PROJECT_ID, pid)
            //         xhr.send()
            //     })
            // }
        </script>
        <script src="https://radosgw.open.woa.com/bkicon-default-9/stream-0.0.6/fonts/iconcool.js"></script>
        <script src="/static/lib.bundle.js"></script>
    </body>
</html>
